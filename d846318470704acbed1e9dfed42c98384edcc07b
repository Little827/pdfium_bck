{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "b7618cdf_69e33dde",
        "filename": "DEPS",
        "patchSetId": 16
      },
      "lineNbr": 125,
      "author": {
        "id": 5045
      },
      "writtenOn": "2022-08-23T23:31:51Z",
      "side": 1,
      "message": "Send this CL out for review?",
      "range": {
        "startLine": 125,
        "startChar": 44,
        "endLine": 125,
        "endChar": 49
      },
      "revId": "d846318470704acbed1e9dfed42c98384edcc07b",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9035e5ba_aa7ff5f6",
        "filename": "core/fpdfapi/render/cpdf_renderstatus.cpp",
        "patchSetId": 16
      },
      "lineNbr": 718,
      "author": {
        "id": 5045
      },
      "writtenOn": "2022-08-23T23:31:51Z",
      "side": 1,
      "message": "This variable\u0027s scope can be narrower now, or it can be omitted altogether.",
      "revId": "d846318470704acbed1e9dfed42c98384edcc07b",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4e92dc46_fcfba97d",
        "filename": "core/fpdfapi/render/cpdf_renderstatus.cpp",
        "patchSetId": 16
      },
      "lineNbr": 718,
      "author": {
        "id": 7620
      },
      "writtenOn": "2022-08-24T17:09:39Z",
      "side": 1,
      "message": "Done. Omitted `blitAlpha` in the new patchset.",
      "parentUuid": "9035e5ba_aa7ff5f6",
      "revId": "d846318470704acbed1e9dfed42c98384edcc07b",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "942933a0_4b830719",
        "filename": "core/fxge/skia/fx_skia_device.cpp",
        "patchSetId": 16
      },
      "lineNbr": 2630,
      "author": {
        "id": 5045
      },
      "writtenOn": "2022-08-23T23:31:51Z",
      "side": 1,
      "message": "So a bitmap that had the `kCleared` state still needs to be pre-multiplied? Similarly, in UnPreMultiply(), bitmap that had the `kCleared` state needs to be un-pre-multiplied?",
      "revId": "d846318470704acbed1e9dfed42c98384edcc07b",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9f1ab90c_4491b294",
        "filename": "core/fxge/skia/fx_skia_device.cpp",
        "patchSetId": 16
      },
      "lineNbr": 2630,
      "author": {
        "id": 5045
      },
      "writtenOn": "2022-08-23T23:51:49Z",
      "side": 1,
      "message": "More generally, it is difficult to reason about the state of the bitmap, because of this conditional. There can be PreMultiply() calls in the code that have no reason to be there, because the bitmap is already pre-multiplied. This conditional masks the issue by turning it into a no-op.\n\nFor instance. I suspect the UnPreMultiply() in FPDF_RenderPage_Continue() may be unnecessary. It\u0027s sort of pre-existing, so this is ok for now, but I think we should do a follow-up to:\n1) change these to CHECKs.\n2) fix callers to avoid the CHECKs.",
      "parentUuid": "942933a0_4b830719",
      "revId": "d846318470704acbed1e9dfed42c98384edcc07b",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "056a9bf4_a1830e15",
        "filename": "core/fxge/skia/fx_skia_device.cpp",
        "patchSetId": 16
      },
      "lineNbr": 2630,
      "author": {
        "id": 7620
      },
      "writtenOn": "2022-08-24T18:07:17Z",
      "side": 1,
      "message": "`kCleared` format doesn\u0027t guarantee that the `CFX_DIBitmap` has no alpha channel.\n\n`m_nFormat` doesn\u0027t get changed until UnPreMultiply() or PreMultiply() is called. So if any (non-Skia) drawing happened after the `CFX_DIBitmap` is created, the bitmap is unpremultiplied.\n\nAn example is in CFX_RenderDevice::DrawNormalText(): the comment says \"DrawNormalTextHelper() can result unpremultipled bitmaps...\"\n\nBasically when m_nFormat \u003d\u003d`kCleared`, the bitmap is unpremultiplied.\n\nI think it would be nice to get rid of `kCleared` and make the `m_nFormat` reflect the actual premultiplied status. I am gonna explore this option.",
      "parentUuid": "9f1ab90c_4491b294",
      "revId": "d846318470704acbed1e9dfed42c98384edcc07b",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "97b8faec_4ea45626",
        "filename": "core/fxge/skia/fx_skia_device.cpp",
        "patchSetId": 16
      },
      "lineNbr": 2630,
      "author": {
        "id": 5045
      },
      "writtenOn": "2022-08-24T21:57:54Z",
      "side": 1,
      "message": "Sounds like a good follow-up.",
      "parentUuid": "056a9bf4_a1830e15",
      "revId": "d846318470704acbed1e9dfed42c98384edcc07b",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    }
  ]
}
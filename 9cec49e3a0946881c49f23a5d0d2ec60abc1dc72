{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "2588346b_285708cb",
        "filename": "fpdfsdk/fpdf_view.cpp",
        "patchSetId": 1
      },
      "lineNbr": 813,
      "author": {
        "id": 8751
      },
      "writtenOn": "2022-07-12T10:36:35Z",
      "side": 1,
      "message": "This additional validation would most probably break pypdfium2 code, unless the bug I experience with `first_scan\u003dNone` \u0026\u0026 `stride\u003d0` is fixed.",
      "revId": "9cec49e3a0946881c49f23a5d0d2ec60abc1dc72",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6b6f0821_e84d9f52",
        "filename": "fpdfsdk/fpdf_view.cpp",
        "patchSetId": 1
      },
      "lineNbr": 813,
      "author": {
        "id": 7620
      },
      "writtenOn": "2022-07-12T16:38:30Z",
      "side": 1,
      "message": "In this case, we should handle the special case that first_scan \u003d\u003d nullptr and stride \u003d\u003d 0 here. And add a matching test case:\nFPDFBitmap_CreateEx(kWidth, kHeight, FPDFBitmap_BGRA, nullptr, 0)",
      "parentUuid": "2588346b_285708cb",
      "revId": "9cec49e3a0946881c49f23a5d0d2ec60abc1dc72",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e7b920ac_b9d25d16",
        "filename": "fpdfsdk/fpdf_view.cpp",
        "patchSetId": 1
      },
      "lineNbr": 813,
      "author": {
        "id": 7620
      },
      "writtenOn": "2022-07-12T16:46:43Z",
      "side": 1,
      "message": "Despite FPDFBitmap_CreateEx(kWidth, kHeight, FPDFBitmap_BGRA, nullptr, 0) case has been covered in https://pdfium-review.googlesource.com/c/pdfium/+/95254/, we can still add it in the embedder test.",
      "parentUuid": "6b6f0821_e84d9f52",
      "revId": "9cec49e3a0946881c49f23a5d0d2ec60abc1dc72",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4351a67b_d5e6cf75",
        "filename": "fpdfsdk/fpdf_view.cpp",
        "patchSetId": 1
      },
      "lineNbr": 813,
      "author": {
        "id": 5045
      },
      "writtenOn": "2022-07-12T21:17:47Z",
      "side": 1,
      "message": "Either pypdfium2 needs to call FPDFBitmap_GetStride() instead of assuming a particular stride, or we don\u0027t do this change and just document the quirk instead. Given this is a long standing PDFium behavior, I\u0027m fine with leaving the quirky behavior as is.",
      "parentUuid": "e7b920ac_b9d25d16",
      "revId": "9cec49e3a0946881c49f23a5d0d2ec60abc1dc72",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "14533daa_29276070",
        "filename": "fpdfsdk/fpdf_view.cpp",
        "patchSetId": 1
      },
      "lineNbr": 813,
      "author": {
        "id": 7620
      },
      "writtenOn": "2022-07-12T21:45:39Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "4351a67b_d5e6cf75",
      "revId": "9cec49e3a0946881c49f23a5d0d2ec60abc1dc72",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "370ea183_36e79f64",
        "filename": "fpdfsdk/fpdf_view.cpp",
        "patchSetId": 1
      },
      "lineNbr": 813,
      "author": {
        "id": 8751
      },
      "writtenOn": "2022-07-12T22:14:28Z",
      "side": 1,
      "message": "I doubt if the imaging library we use (Pillow) supports a custom stride value. I think it might always assume width*n_colours. Maybe I can switch the code to external buffer so we can set stride as we like, considering that the behaviour for internal buffer appears to be very awkward indeed.\nAs this patch would definitely break pypdfium2 code, I ask you to please delay merging this until I have decided what to do.\nThat said, can you please clarify if there are any negative implications of the current solution (using internal buffer and defining a certain stride)? If not, then perhaps this additional validation should be rejected.",
      "parentUuid": "14533daa_29276070",
      "revId": "9cec49e3a0946881c49f23a5d0d2ec60abc1dc72",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ca024382_6ee4d91f",
        "filename": "fpdfsdk/fpdf_view.cpp",
        "patchSetId": 1
      },
      "lineNbr": 813,
      "author": {
        "id": 5045
      },
      "writtenOn": "2022-07-12T22:33:55Z",
      "side": 1,
      "message": "FPDFBitmap_CreateEx() isn\u0027t going to change much, so if the caller wants an internal memory allocation with a specified stride, it will (continue to) work as long as the stride value is correct. No real negative implications other than the caller has to do the stride calculation when it is not strictly necessary. Other than that, it is just awkward.",
      "parentUuid": "370ea183_36e79f64",
      "revId": "9cec49e3a0946881c49f23a5d0d2ec60abc1dc72",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    }
  ]
}
{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "181baa36_df2b5885",
        "filename": "/COMMIT_MSG",
        "patchSetId": 14
      },
      "lineNbr": 9,
      "author": {
        "id": 5045
      },
      "writtenOn": "2022-09-09T18:45:09Z",
      "side": 1,
      "message": "The way this sentence is phrased makes it sound like `FPDF_LIBRARY_CONFIG` is the new flag. At least that\u0027s how my brain parses it.",
      "revId": "70474ad36886fcd8335be484965360513d446728",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ca2923b3_cfa33d47",
        "filename": "/COMMIT_MSG",
        "patchSetId": 14
      },
      "lineNbr": 9,
      "author": {
        "id": 7704
      },
      "writtenOn": "2022-09-12T20:22:29Z",
      "side": 1,
      "message": "Including \"into\" hopefully helps this to parse better?",
      "parentUuid": "181baa36_df2b5885",
      "revId": "70474ad36886fcd8335be484965360513d446728",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1f6051ef_9d1822cb",
        "filename": "/COMMIT_MSG",
        "patchSetId": 14
      },
      "lineNbr": 9,
      "author": {
        "id": 5045
      },
      "writtenOn": "2022-09-12T20:54:28Z",
      "side": 1,
      "message": "How does s/into/in/ sound to you?",
      "parentUuid": "ca2923b3_cfa33d47",
      "revId": "70474ad36886fcd8335be484965360513d446728",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4a5e214b_bf2205ea",
        "filename": "core/fxge/cfx_defaultrenderdevice.cpp",
        "patchSetId": 14
      },
      "lineNbr": 12,
      "author": {
        "id": 5045
      },
      "writtenOn": "2022-09-09T18:45:09Z",
      "side": 1,
      "message": "Not used?",
      "revId": "70474ad36886fcd8335be484965360513d446728",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "30490688_c0cf8b20",
        "filename": "core/fxge/cfx_defaultrenderdevice.cpp",
        "patchSetId": 14
      },
      "lineNbr": 12,
      "author": {
        "id": 7704
      },
      "writtenOn": "2022-09-12T20:22:29Z",
      "side": 1,
      "message": "Ah, yes this should have gone away as of patchset 8.",
      "parentUuid": "4a5e214b_bf2205ea",
      "revId": "70474ad36886fcd8335be484965360513d446728",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "98e6ea58_a382b34a",
        "filename": "core/fxge/cfx_defaultrenderdevice.h",
        "patchSetId": 14
      },
      "lineNbr": 53,
      "author": {
        "id": 5045
      },
      "writtenOn": "2022-09-09T18:33:26Z",
      "side": 1,
      "message": "So `kAgg` is not defined in an AGG-only build, but `FPDF_RENDERERTYPE_AGG` is. Would you consider that a violation of the 1:1 mapping?",
      "revId": "70474ad36886fcd8335be484965360513d446728",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "03bb8c0a_6bc407b4",
        "filename": "core/fxge/cfx_defaultrenderdevice.h",
        "patchSetId": 14
      },
      "lineNbr": 53,
      "author": {
        "id": 7704
      },
      "writtenOn": "2022-09-12T20:22:29Z",
      "side": 1,
      "message": "Fair point.\n\nI had a notion in my head that we probably didn\u0027t want to have `m_RendererType` be conditionally compiled in the public config structure.  That\u0027s what ultimately led to this discrepancy.\n\nPerhaps that was a faulty assumption?  This problem resolves itself by conditioning this over in fpdfview.h in a similar way as done here.",
      "parentUuid": "98e6ea58_a382b34a",
      "revId": "70474ad36886fcd8335be484965360513d446728",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a212a37d_39b47335",
        "filename": "core/fxge/cfx_defaultrenderdevice.h",
        "patchSetId": 14
      },
      "lineNbr": 53,
      "author": {
        "id": 5045
      },
      "writtenOn": "2022-09-12T20:54:28Z",
      "side": 1,
      "message": "This could have been done in several different ways. IMO, there was not enough design ahead of time, so there ended up being a lot of churn.\n\nSo... should the definitions in //public be heavily ifdefed like it is in the latest patch set? Should it be free of ifdefs? What are the advantages of one vs. the other?",
      "parentUuid": "03bb8c0a_6bc407b4",
      "revId": "70474ad36886fcd8335be484965360513d446728",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "785b4abf_e10a22b6",
        "filename": "core/fxge/cfx_defaultrenderdevice.h",
        "patchSetId": 14
      },
      "lineNbr": 53,
      "author": {
        "id": 7704
      },
      "writtenOn": "2022-09-13T20:41:25Z",
      "side": 1,
      "message": "Okay, here\u0027s my thoughts on options here:\n\n1) If the public definition is not ifdefed like the internal parts then it presents embedders the ability to generate invalid configurations that only surface at runtime.  Without any ifdefing then AGG, Skia, and SkiaPaths could all be available as types to choose.  An embedder which happens to choose experimental config version 4 could end up asking for something like SkiaPaths, only to find out at runtime that it isn\u0027t allowed.  (That\u0027s not ideal.)\n\n2) A slight improvement to assist developers in not generating invalid configs would be to conditionally compile the renderer types in the enum, and the configuration structure field is always available.  This makes it easier for a developer scanning the config structure to not have to deal with the extra thought of parsing the ifdefs.  There is always at least one type of renderer available in a build, so the ability to explicitly specify a valid choice is possible.  The need to specify a valid entry for this field if choosing the config version 4 doesn\u0027t seem to be a significant ask of embedders (IMO).\n\n3) Including ifdefs in the public config structure means that embedders that choose version 4 only have to specify a choice if the build explicitly includes a Skia build.  There\u0027s really not much benefit here, unless the config structure versions were even further extended.  In that case, an embedder could effectively ignore this experimental field so long as their builds are AGG-only.\n\nConsidering the future...:\n\nThe way we do API configuration is expected to be reworked, and this will all get redone.  The new API would likely still need to similarly consider what to conditionally compile, so this all still is applicable to that.\n\nAt some point Skia use in PDFium should become production quality and be able to become the default renderer instead of AGG.  If AGG gets deprecated, then we could shift build defaults to chose Skia instead of AGG.\n\nWith option 3), if an embedder had updated to config version 4 (or higher), but otherwise didn\u0027t have to do anything to specify the preferred renderer, then that embedder could unexpectedly be using a different renderer without any indication of the change.  That seems undesirable; I think that is sufficient to rule out 3).\n\nBetween 1) and 2), I think 2) provides a better balance of clarity \u0026 simplicity to embedders.  That would need to impact the comments about how to keep public vs. internal \"in sync\".\n\nYour thoughts?",
      "parentUuid": "a212a37d_39b47335",
      "revId": "70474ad36886fcd8335be484965360513d446728",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "02a4c109_4dd97c3a",
        "filename": "core/fxge/cfx_defaultrenderdevice.h",
        "patchSetId": 14
      },
      "lineNbr": 67,
      "author": {
        "id": 7620
      },
      "writtenOn": "2022-09-09T16:22:42Z",
      "side": 1,
      "message": "Add \"  // defined(_SKIA_SUPPORT_) || defined(_SKIA_SUPPORT_PATHS_)\"",
      "revId": "70474ad36886fcd8335be484965360513d446728",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3633f9a2_c24c6d2a",
        "filename": "core/fxge/cfx_defaultrenderdevice.h",
        "patchSetId": 14
      },
      "lineNbr": 67,
      "author": {
        "id": 7704
      },
      "writtenOn": "2022-09-12T20:22:29Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "02a4c109_4dd97c3a",
      "revId": "70474ad36886fcd8335be484965360513d446728",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "63fb4adc_8a7bd8e8",
        "filename": "fpdfsdk/fpdf_view.cpp",
        "patchSetId": 14
      },
      "lineNbr": 105,
      "author": {
        "id": 5045
      },
      "writtenOn": "2022-09-09T18:45:09Z",
      "side": 1,
      "message": "Nesting this inside another #if doesn\u0027t seem to be adding any value.",
      "revId": "70474ad36886fcd8335be484965360513d446728",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b1e2b120_4e6003fb",
        "filename": "fpdfsdk/fpdf_view.cpp",
        "patchSetId": 14
      },
      "lineNbr": 105,
      "author": {
        "id": 7704
      },
      "writtenOn": "2022-09-12T20:22:29Z",
      "side": 1,
      "message": "`CFX_DefaultRenderDevice::RendererType::kSkia` isn\u0027t defined when `_SKIA_SUPPORT_PATHS_` is the build variant, it\u0027s only available for `_SKIA_SUPPORT_`.",
      "parentUuid": "63fb4adc_8a7bd8e8",
      "revId": "70474ad36886fcd8335be484965360513d446728",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "be417d15_769cd406",
        "filename": "fpdfsdk/fpdf_view.cpp",
        "patchSetId": 14
      },
      "lineNbr": 127,
      "author": {
        "id": 7620
      },
      "writtenOn": "2022-09-09T16:22:42Z",
      "side": 1,
      "message": "Also mention \"1:1 mapping with the public type\" just like the other comment in core/fxge/cfx_defaultrenderdevice.h.",
      "range": {
        "startLine": 126,
        "startChar": 38,
        "endLine": 127,
        "endChar": 25
      },
      "revId": "70474ad36886fcd8335be484965360513d446728",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "62cefc5e_8bed4c5c",
        "filename": "fpdfsdk/fpdf_view.cpp",
        "patchSetId": 14
      },
      "lineNbr": 127,
      "author": {
        "id": 7704
      },
      "writtenOn": "2022-09-12T20:22:29Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "be417d15_769cd406",
      "range": {
        "startLine": 126,
        "startChar": 38,
        "endLine": 127,
        "endChar": 25
      },
      "revId": "70474ad36886fcd8335be484965360513d446728",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "14c3ce4a_4b0104d2",
        "filename": "public/fpdfview.h",
        "patchSetId": 14
      },
      "lineNbr": 237,
      "author": {
        "id": 7620
      },
      "writtenOn": "2022-09-09T16:22:42Z",
      "side": 1,
      "message": "PDF renderer types?",
      "range": {
        "startLine": 237,
        "startChar": 3,
        "endLine": 237,
        "endChar": 16
      },
      "revId": "70474ad36886fcd8335be484965360513d446728",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "5f8d3a77_56487c19",
        "filename": "public/fpdfview.h",
        "patchSetId": 14
      },
      "lineNbr": 237,
      "author": {
        "id": 7704
      },
      "writtenOn": "2022-09-12T20:22:29Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "14c3ce4a_4b0104d2",
      "range": {
        "startLine": 237,
        "startChar": 3,
        "endLine": 237,
        "endChar": 16
      },
      "revId": "70474ad36886fcd8335be484965360513d446728",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "1c495ea5_aac82837",
        "filename": "public/fpdfview.h",
        "patchSetId": 14
      },
      "lineNbr": 283,
      "author": {
        "id": 5045
      },
      "writtenOn": "2022-09-09T18:45:09Z",
      "side": 1,
      "message": "\"set\"",
      "range": {
        "startLine": 282,
        "startChar": 69,
        "endLine": 283,
        "endChar": 14
      },
      "revId": "70474ad36886fcd8335be484965360513d446728",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bcc3d8b6_b817b87b",
        "filename": "public/fpdfview.h",
        "patchSetId": 14
      },
      "lineNbr": 283,
      "author": {
        "id": 7704
      },
      "writtenOn": "2022-09-12T20:22:29Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "1c495ea5_aac82837",
      "range": {
        "startLine": 282,
        "startChar": 69,
        "endLine": 283,
        "endChar": 14
      },
      "revId": "70474ad36886fcd8335be484965360513d446728",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    }
  ]
}
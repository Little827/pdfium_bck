{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "f1139f03_b88a8cb7",
        "filename": "core/fxge/skia/fx_skia_device.cpp",
        "patchSetId": 1
      },
      "lineNbr": 1006,
      "author": {
        "id": 7598
      },
      "writtenOn": "2023-05-25T18:05:03Z",
      "side": 1,
      "message": "The slow path gets triggered when HasRSX() returns false. Is this really necessary as often as we do now?",
      "range": {
        "startLine": 1006,
        "startChar": 16,
        "endLine": 1006,
        "endChar": 22
      },
      "revId": "a1321ed418b46a46760e723aebb11c96a101cb29",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f6f3e9e7_286c85fa",
        "filename": "core/fxge/skia/fx_skia_device.cpp",
        "patchSetId": 1
      },
      "lineNbr": 1006,
      "author": {
        "id": 7598
      },
      "writtenOn": "2023-05-25T18:44:23Z",
      "side": 1,
      "message": "This likely gives incorrect results, but what\u0027s the performance delta if HasRSX() just always returns true?",
      "parentUuid": "f1139f03_b88a8cb7",
      "range": {
        "startLine": 1006,
        "startChar": 16,
        "endLine": 1006,
        "endChar": 22
      },
      "revId": "a1321ed418b46a46760e723aebb11c96a101cb29",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "096e2f56_3fa2373c",
        "filename": "core/fxge/skia/fx_skia_device.cpp",
        "patchSetId": 1
      },
      "lineNbr": 1006,
      "author": {
        "id": 7598
      },
      "writtenOn": "2023-05-25T18:45:51Z",
      "side": 1,
      "message": "(Or oneAtATime is always false, anyway.)",
      "parentUuid": "f6f3e9e7_286c85fa",
      "range": {
        "startLine": 1006,
        "startChar": 16,
        "endLine": 1006,
        "endChar": 22
      },
      "revId": "a1321ed418b46a46760e723aebb11c96a101cb29",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ea30f9da_1c333e21",
        "filename": "core/fxge/skia/fx_skia_device.cpp",
        "patchSetId": 1
      },
      "lineNbr": 1006,
      "author": {
        "id": 7620
      },
      "writtenOn": "2023-05-25T19:41:02Z",
      "side": 1,
      "message": "This change should has nothing to do with `hasRSX`.\n\nPreviously the horizontal scaling was done only to non-RSX text inside TryDrawText(). But due to some unideal rendering results for certain PDFs, we decided to not let SkiaDevice handle it and fallback to the common AGG path. So the horizontal scaling process got removed from Skia.\n\nThis CL improved those unideal rendering issue inside Skia and therefore we are able to move the horizontal scaling process back to Skia to avoid premultiplication.",
      "parentUuid": "096e2f56_3fa2373c",
      "range": {
        "startLine": 1006,
        "startChar": 16,
        "endLine": 1006,
        "endChar": 22
      },
      "revId": "a1321ed418b46a46760e723aebb11c96a101cb29",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c6c0a05a_c531350d",
        "filename": "core/fxge/skia/fx_skia_device.cpp",
        "patchSetId": 1
      },
      "lineNbr": 1006,
      "author": {
        "id": 7598
      },
      "writtenOn": "2023-05-25T19:45:15Z",
      "side": 1,
      "message": "If my theory is that the cost is due to calling into Skia for each character, though, then this is a quick way to confirm that. It has nothing to do with what the correct behavior should be.",
      "parentUuid": "ea30f9da_1c333e21",
      "range": {
        "startLine": 1006,
        "startChar": 16,
        "endLine": 1006,
        "endChar": 22
      },
      "revId": "a1321ed418b46a46760e723aebb11c96a101cb29",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0f59d247_1f99d51d",
        "filename": "core/fxge/skia/fx_skia_device.cpp",
        "patchSetId": 1
      },
      "lineNbr": 1006,
      "author": {
        "id": 7598
      },
      "writtenOn": "2023-05-25T19:46:02Z",
      "side": 1,
      "message": "And then if the theory is confirmed, we can investigate if there are ways to reduce the number of API calls. For example, can we batch any of these calls together, rather than making it all or nothing?",
      "parentUuid": "c6c0a05a_c531350d",
      "range": {
        "startLine": 1006,
        "startChar": 16,
        "endLine": 1006,
        "endChar": 22
      },
      "revId": "a1321ed418b46a46760e723aebb11c96a101cb29",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8ac41641_1a803d5d",
        "filename": "core/fxge/skia/fx_skia_device.cpp",
        "patchSetId": 1
      },
      "lineNbr": 1006,
      "author": {
        "id": 7620
      },
      "writtenOn": "2023-05-25T20:41:05Z",
      "side": 1,
      "message": "I tried to draw all the characters in a string all together if `use_gap` is true, it didn\u0027t improve the performance (and it would be wrong to scale a whole string at the same scale level since it ignores each character\u0027s specific position). So I ruled out that path for improvement.",
      "parentUuid": "0f59d247_1f99d51d",
      "range": {
        "startLine": 1006,
        "startChar": 16,
        "endLine": 1006,
        "endChar": 22
      },
      "revId": "a1321ed418b46a46760e723aebb11c96a101cb29",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "046de1ee_bbc87df6",
        "filename": "core/fxge/skia/fx_skia_device.cpp",
        "patchSetId": 1
      },
      "lineNbr": 1006,
      "author": {
        "id": 7613
      },
      "writtenOn": "2023-05-25T20:50:54Z",
      "side": 1,
      "message": "So did you run the experiment, even if it produces wrong results? What\u0027s the overhead of calling the Skia API 10,000 times vs. actually drawing 10,000 characters? That\u0027s the question I need you to answer; my suggestion is just a quick and easy way to do it.\n\ndrawTextRSXform() allows applying an individual rotation/scale/translation to every glyph; this covers most common transformations, other than something like a perspective transforms.",
      "parentUuid": "8ac41641_1a803d5d",
      "range": {
        "startLine": 1006,
        "startChar": 16,
        "endLine": 1006,
        "endChar": 22
      },
      "revId": "a1321ed418b46a46760e723aebb11c96a101cb29",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f0029380_3b486353",
        "filename": "core/fxge/skia/fx_skia_device.cpp",
        "patchSetId": 1
      },
      "lineNbr": 1006,
      "author": {
        "id": 7613
      },
      "writtenOn": "2023-05-25T20:56:00Z",
      "side": 1,
      "message": "(Sorry, that\u0027s not the actual API, but in any case, there are various ways to accomplish this.)",
      "parentUuid": "046de1ee_bbc87df6",
      "range": {
        "startLine": 1006,
        "startChar": 16,
        "endLine": 1006,
        "endChar": 22
      },
      "revId": "a1321ed418b46a46760e723aebb11c96a101cb29",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "708781c4_539c65b1",
        "filename": "core/fxge/skia/fx_skia_device.cpp",
        "patchSetId": 1
      },
      "lineNbr": 1006,
      "author": {
        "id": 7620
      },
      "writtenOn": "2023-05-25T21:45:44Z",
      "side": 1,
      "message": "I tested the following two case: \n(1) call SkTextBlob::MakeFromPosText() + drawTextBlob() 10000 times and each time it draws 1 character\n(2) call SkTextBlob::MakeFromPosText() + drawTextBlob() only once and draw 1000 characters.\n\nThe running time for both cases are very similar, which was also proved by combine characters in `use_gap` \u003d true cases.",
      "parentUuid": "f0029380_3b486353",
      "range": {
        "startLine": 1006,
        "startChar": 16,
        "endLine": 1006,
        "endChar": 22
      },
      "revId": "a1321ed418b46a46760e723aebb11c96a101cb29",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "be6a7032_55e6541d",
        "filename": "core/fxge/skia/fx_skia_device.cpp",
        "patchSetId": 1
      },
      "lineNbr": 1124,
      "author": {
        "id": 7598
      },
      "writtenOn": "2023-05-25T18:01:10Z",
      "side": 1,
      "message": "Option 2 is the original code, right?",
      "revId": "a1321ed418b46a46760e723aebb11c96a101cb29",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c432f3df_79eb2d63",
        "filename": "core/fxge/skia/fx_skia_device.cpp",
        "patchSetId": 1
      },
      "lineNbr": 1124,
      "author": {
        "id": 7620
      },
      "writtenOn": "2023-05-25T19:41:02Z",
      "side": 1,
      "message": "Option 2 is just another equivalent way to draw the text blobs. But I noticed significant slow down when comparing to using the APIs in option 1.",
      "parentUuid": "be6a7032_55e6541d",
      "revId": "a1321ed418b46a46760e723aebb11c96a101cb29",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    }
  ]
}
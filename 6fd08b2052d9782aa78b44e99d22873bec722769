{
  "comments": [
    {
      "key": {
        "uuid": "eeacc214_b4b29a3d",
        "filename": "fpdfsdk/fpdf_edittext.cpp",
        "patchSetId": 10
      },
      "lineNbr": 493,
      "author": {
        "id": 7704
      },
      "writtenOn": "2019-09-05T21:28:18Z",
      "side": 1,
      "message": "Presumably the value of parameter should be based on something inside the data parameter?\n\nIf the font is indeed vertical, it seems that this would be relying upon LoadCompositeFont() to detect and correct the m_bVertical flag.  I think that assumption might be dangerous, due to [1].\n\nI\u0027m not sure what is the right thing to do about that.  (Well, I think fixing that TODO is probably the thing to do, but I don\u0027t know yet what that change should like.)\n\n[1] https://cs.chromium.org/chromium/src/third_party/pdfium/fpdfsdk/fpdf_edittext.cpp?rcl\u003da6b07058f9525c42b021f6f01d5e0da3215f46ed\u0026l\u003d420",
      "range": {
        "startLine": 493,
        "startChar": 33,
        "endLine": 493,
        "endChar": 38
      },
      "revId": "6fd08b2052d9782aa78b44e99d22873bec722769",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4fa46fe2_bbe93eda",
        "filename": "fpdfsdk/fpdf_edittext.cpp",
        "patchSetId": 10
      },
      "lineNbr": 493,
      "author": {
        "id": 7620
      },
      "writtenOn": "2019-09-06T00:46:39Z",
      "side": 1,
      "message": "Hi Alan,\n\nThe value for vertical flag is from CPDF_Font struct instead of coming from data.\n\nSince in SkiaPaths, the DrawText() process only uses CFX_Font and CFX_Font |p_Font| is completely cut off from CPDF_Font struct (usually CPDF_Font has vertical flag \u003d true but CFX_Font doesn\u0027t necessarily have vertical flag \u003d true, the glyphs should still be displayed vertically ), that\u0027s why I am passing an extra parameter to set the flag for CFX_Font.\n\nThanks for mentioning about keeping it safe, I think I can implement the following check in LoadEmbedded() to avoid flipping |m_bVertical|\u0027s value from true back to false.\n\nbool CFX_Font::LoadEmbedded(pdfium::span\u003cconst uint8_t\u003e src_span,\n                            bool bVertical) {\n  if(!m_bVertical \u0026\u0026 bVertical)\n      m_bVertical \u003d true;\n  m_pFontDataAllocation \u003d\n      std::vector\u003cuint8_t\u003e(src_span.begin(), src_span.end());\n  ......\n}",
      "parentUuid": "eeacc214_b4b29a3d",
      "range": {
        "startLine": 493,
        "startChar": 33,
        "endLine": 493,
        "endChar": 38
      },
      "revId": "6fd08b2052d9782aa78b44e99d22873bec722769",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    }
  ]
}
{
  "pushCert": "certificate version 0.1\npusher 5A66FD7B 1576631569 -0800\nnonce AC6AUtNsgLzW4MsECl5nVNsao89R53zYXCIQrlPbHVkHhXuDJ596cig1fBe6yCAWXMfvPiRT5JMV\n\n0000000000000000000000000000000000000000 a86a423213b90414c10353548e50f149eb9ef806 refs/for/refs/heads/master%wip,m\u003dInitial_upload,cc\u003dpdfium-reviews@googlegroups.com\n-----BEGIN PGP SIGNATURE-----\n\niQEzBAABCgAdFiEE5k8iyLVP2jn8A19DqzYtYVpm/XsFAl35fREACgkQqzYtYVpm\n/XsDEgf/a+n+6s39XIJ6H8SMqr0LZ+AI9xOqARnWcyAjCADpt+4vMspYkRtBd1j3\nxfb8dZ5eOUAM+Rv6dyNGSrmGJC/0dnlwTLRz/N+aX0cHujNR3dMuVCKsab1aQTns\n8mvjwNvggIMESi/oa10/W9yuTr6iGVrs4uIII4K98XNuD+kGnhfoIDIZcGFAnc63\nLSGS95f1JQObRHfBEGOpc/ZGjKIlvoUd6NZI4TiFm67G5sYSx4S/8cTWbhsz4O6c\n39DKS9fX2zRAx6TSE/pUhnU2crZp+EgvNG1zv9zTCUmK16WkWOLvR8ZIxAvvA9ML\n/bvmZWGml0HfQm/kynJnFQ0bD89F3Q\u003d\u003d\n\u003dwbRh\n-----END PGP SIGNATURE-----\n",
  "comments": [
    {
      "key": {
        "uuid": "fd50e27a_f3bb693e",
        "filename": "core/fxcodec/bmp/cfx_bmpdecompressor.cpp",
        "patchSetId": 1
      },
      "lineNbr": 90,
      "author": {
        "id": 5495
      },
      "writtenOn": "2019-12-20T20:12:16Z",
      "side": 1,
      "message": "and if we wanted to be really OCD about things, we wouldn\u0027t care about the alignment in the BmpFileHeader(and its pragma pack), instead give it a constructor like\n\n  BmpFileHeader(span\u003cuint8_t\u003e buf) :\n    m_pFoo(FXSYS_GetWordLsbFirst(buf)),\n    m_pBaz(FXSYS_GetWordLsbFirst(buf + 2)),",
      "range": {
        "startLine": 90,
        "startChar": 2,
        "endLine": 90,
        "endChar": 15
      },
      "revId": "a86a423213b90414c10353548e50f149eb9ef806",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "304ff2a2_effffd78",
        "filename": "core/fxcrt/fx_system.h",
        "patchSetId": 1
      },
      "lineNbr": 173,
      "author": {
        "id": 5495
      },
      "writtenOn": "2019-12-18T17:42:03Z",
      "side": 1,
      "message": "My feeling is this should take a const uint8_t* as an argument, because we might want to pick up a misalgined field from a buffer without first having to load it into a uint16_t lvalue.\n\nnit: FXSYS_GetUint16LSBFirst()\nnit: I\u0027d declare this |inline| function and implement it in the header to ensure debug builds don\u0027t crawl along.",
      "range": {
        "startLine": 173,
        "startChar": 32,
        "endLine": 173,
        "endChar": 44
      },
      "revId": "a86a423213b90414c10353548e50f149eb9ef806",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "91ed3e0e_9d41225b",
        "filename": "core/fxcrt/fx_system.h",
        "patchSetId": 1
      },
      "lineNbr": 173,
      "author": {
        "id": 5045
      },
      "writtenOn": "2019-12-18T20:11:45Z",
      "side": 1,
      "message": "I really like avoiding casting in the callers, but I see Chromium\u0027s base::ReadBigEndian() takes a pointer too. So I suppose we can do it that way. But now I\u0027m also tempted to copy base::ReadBigEndian() ...",
      "parentUuid": "304ff2a2_effffd78",
      "range": {
        "startLine": 173,
        "startChar": 32,
        "endLine": 173,
        "endChar": 44
      },
      "revId": "a86a423213b90414c10353548e50f149eb9ef806",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2dd1276c_9e9931ec",
        "filename": "core/fxcrt/fx_system.h",
        "patchSetId": 1
      },
      "lineNbr": 173,
      "author": {
        "id": 5045
      },
      "writtenOn": "2019-12-19T03:27:52Z",
      "side": 1,
      "message": "OTOH, a bunch of functions in base/sys_byteorder.h takes the unsigned int values...\n\nAre you worried the misaligned buffer case may cause poor performance?",
      "parentUuid": "91ed3e0e_9d41225b",
      "range": {
        "startLine": 173,
        "startChar": 32,
        "endLine": 173,
        "endChar": 44
      },
      "revId": "a86a423213b90414c10353548e50f149eb9ef806",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4c48f1e1_675c10f0",
        "filename": "core/fxcrt/fx_system.h",
        "patchSetId": 1
      },
      "lineNbr": 173,
      "author": {
        "id": 5495
      },
      "writtenOn": "2019-12-19T17:06:29Z",
      "side": 1,
      "message": "On some processors of yore (sparc, mips etc), you\u0027d get an alignment fault and execution stops akin to a segv. Since this code is working around architectural differences, it would be a shame if it introduced further restrictions on architectures that it supports.",
      "parentUuid": "2dd1276c_9e9931ec",
      "range": {
        "startLine": 173,
        "startChar": 32,
        "endLine": 173,
        "endChar": 44
      },
      "revId": "a86a423213b90414c10353548e50f149eb9ef806",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "27bd144f_c10b8f9f",
        "filename": "core/fxcrt/fx_system.h",
        "patchSetId": 1
      },
      "lineNbr": 173,
      "author": {
        "id": 5045
      },
      "writtenOn": "2019-12-19T20:35:40Z",
      "side": 1,
      "message": "In those cases, we\u0027d probably want to just align our data correctly?",
      "parentUuid": "4c48f1e1_675c10f0",
      "range": {
        "startLine": 173,
        "startChar": 32,
        "endLine": 173,
        "endChar": 44
      },
      "revId": "a86a423213b90414c10353548e50f149eb9ef806",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "74df45d1_d815b688",
        "filename": "core/fxcrt/fx_system.h",
        "patchSetId": 1
      },
      "lineNbr": 173,
      "author": {
        "id": 5495
      },
      "writtenOn": "2019-12-19T20:41:06Z",
      "side": 1,
      "message": "And, in fact, the compiler does that.  But where you get into trouble is when some image format has packed these fields together into its header like\n2 byte magic, 4 byte size, eg.\n\n  uint8_t buffer[512];\n  uint16_t magic \u003d GtUint16LSB(\u0026buffer[0]);\n  uint32_t size \u003d GetUint32LSB(\u0026buffer[2]);\n\nor\n  uint32_t* ptr \u003d static_cast\u003cuint32_t*\u003e(\u0026buffer[2]));\n\nat which point (*ptr) faults.",
      "parentUuid": "27bd144f_c10b8f9f",
      "range": {
        "startLine": 173,
        "startChar": 32,
        "endLine": 173,
        "endChar": 44
      },
      "revId": "a86a423213b90414c10353548e50f149eb9ef806",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7677a783_d326e54a",
        "filename": "core/fxcrt/fx_system.h",
        "patchSetId": 1
      },
      "lineNbr": 173,
      "author": {
        "id": 5045
      },
      "writtenOn": "2019-12-20T19:48:10Z",
      "side": 1,
      "message": "So it sounds like we should use byteorder.h when we already have a uint16_t, and have something else for buffers with potentially unaligned data. How about I leave FXWORD_GET_LSBFIRST() and friends alone for now, but remove as many uses as possible?",
      "parentUuid": "74df45d1_d815b688",
      "range": {
        "startLine": 173,
        "startChar": 32,
        "endLine": 173,
        "endChar": 44
      },
      "revId": "a86a423213b90414c10353548e50f149eb9ef806",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f6f83768_41489fa2",
        "filename": "core/fxcrt/fx_system.h",
        "patchSetId": 1
      },
      "lineNbr": 173,
      "author": {
        "id": 5495
      },
      "writtenOn": "2019-12-20T20:03:54Z",
      "side": 1,
      "message": "That\u0027s OK.  The question becomes, how did you get the uint16_t in the wrong order?  Usually by either mapping a structure directly on top of a uint8_t buffer, or by doing a *(uint16_t)(buffer + n);  In the later case, we probably wanted to be using the macros themselves.\n\nIf you wanted to make FXWORD_GET_LSBFIRST() an inline function taking a uint8_t* ptr argument, that would be better as we can be sure that the macro isn\u0027t being applied to something that isn\u0027t already uint8_t *",
      "parentUuid": "7677a783_d326e54a",
      "range": {
        "startLine": 173,
        "startChar": 32,
        "endLine": 173,
        "endChar": 44
      },
      "revId": "a86a423213b90414c10353548e50f149eb9ef806",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    }
  ]
}
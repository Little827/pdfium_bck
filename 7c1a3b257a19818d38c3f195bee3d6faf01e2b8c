{
  "comments": [
    {
      "key": {
        "uuid": "6f9fc0ef_45d856d9",
        "filename": "fpdfsdk/cpdfsdk_formfillenvironment.cpp",
        "patchSetId": 16
      },
      "lineNbr": 711,
      "author": {
        "id": 5045
      },
      "writtenOn": "2020-02-05T08:36:31Z",
      "side": 1,
      "message": "Why don\u0027t we split all the new code here into its own helper method that can just have a void return type? Then we don\u0027t need to have several \"return true\" statements, where the reader has to remember this comment applies.",
      "revId": "7c1a3b257a19818d38c3f195bee3d6faf01e2b8c",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3a0a0b54_1c92dd2f",
        "filename": "fpdfsdk/cpdfsdk_formfillenvironment.cpp",
        "patchSetId": 16
      },
      "lineNbr": 711,
      "author": {
        "id": 7688
      },
      "writtenOn": "2020-02-05T13:37:54Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "6f9fc0ef_45d856d9",
      "revId": "7c1a3b257a19818d38c3f195bee3d6faf01e2b8c",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2dd1ed8a_c6165681",
        "filename": "fpdfsdk/cpdfsdk_formfillenvironment.cpp",
        "patchSetId": 16
      },
      "lineNbr": 716,
      "author": {
        "id": 5045
      },
      "writtenOn": "2020-02-05T08:36:31Z",
      "side": 1,
      "message": "This GetPage() call may be replaceable with GetPDFPage(), but one needs to check and make sure it\u0027s equivalent when XFA is enabled.",
      "revId": "7c1a3b257a19818d38c3f195bee3d6faf01e2b8c",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "865e783b_53766a16",
        "filename": "fpdfsdk/cpdfsdk_formfillenvironment.cpp",
        "patchSetId": 16
      },
      "lineNbr": 716,
      "author": {
        "id": 7688
      },
      "writtenOn": "2020-02-05T13:37:54Z",
      "side": 1,
      "message": "GetPDFPage() returns nullptr if XFA is enabled otherwise behaves the same as GetPage(). In XFA GetPage() will not return nullptr.",
      "parentUuid": "2dd1ed8a_c6165681",
      "revId": "7c1a3b257a19818d38c3f195bee3d6faf01e2b8c",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6cf465e3_01d13ef7",
        "filename": "fpdfsdk/cpdfsdk_formfillenvironment.cpp",
        "patchSetId": 16
      },
      "lineNbr": 716,
      "author": {
        "id": 5045
      },
      "writtenOn": "2020-02-06T00:38:58Z",
      "side": 1,
      "message": "I think CPDFSDK_Annot::GetPDFPage() can end up calling CPDFSDK_PageView::GetPDFPage() even if XFA is enabled. Depending on what |CPDFSDK_PageView::m_page| holds, CPDFSDK_PageView::GetPDFPage() can potentially return a valid pointer.\n\nThere\u0027s too many page type conversions, with conditionals. So it\u0027s a bit hard to eyeball whether GetPDFPage() is equivalent. Let\u0027s figure it out later.",
      "parentUuid": "865e783b_53766a16",
      "revId": "7c1a3b257a19818d38c3f195bee3d6faf01e2b8c",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "984b03da_5339ea5c",
        "filename": "fpdfsdk/cpdfsdk_formfillenvironment.cpp",
        "patchSetId": 16
      },
      "lineNbr": 716,
      "author": {
        "id": 7688
      },
      "writtenOn": "2020-02-06T11:13:57Z",
      "side": 1,
      "message": "Upon further investigation i found out that GetPDFPage can be used instead of GetPage.\nFor XFA: GetXFAPage() is called first which returns nullptr which i mentioned earlier. I missed the conditional return of this nullptr here: https://cs.chromium.org/chromium/src/third_party/pdfium/fpdfsdk/cpdfsdk_annot.cpp?l\u003d59\nSince this returns nullptr that value is not returned instead GetPDFPage() is called.",
      "parentUuid": "6cf465e3_01d13ef7",
      "revId": "7c1a3b257a19818d38c3f195bee3d6faf01e2b8c",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6328628b_233549c4",
        "filename": "fpdfsdk/cpdfsdk_formfillenvironment.cpp",
        "patchSetId": 16
      },
      "lineNbr": 716,
      "author": {
        "id": 5045
      },
      "writtenOn": "2020-02-11T07:41:15Z",
      "side": 1,
      "message": "I\u0027m still concerned we are not getting the XFA case right. In the interest of moving forward on this, can you file a new PDFium bug for making sure SendOnFocusChange() can handle XFA widgets? We can fix the XFA case later. Since nobody, AFAIK, is shipping with XFA turned on.\n\nAs another sign of potential trouble, CPDFSDK_BAAnnot implements CPDFSDK_Annot::GetPDFAnnot(), but CPDFXFA_Widget does not. So if this code ever receives a CPDFXFA_Widget, the GetPDFAnnot() call below will crash.",
      "parentUuid": "984b03da_5339ea5c",
      "revId": "7c1a3b257a19818d38c3f195bee3d6faf01e2b8c",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "43e47377_ea2c1b07",
        "filename": "fpdfsdk/cpdfsdk_formfillenvironment.cpp",
        "patchSetId": 16
      },
      "lineNbr": 716,
      "author": {
        "id": 7688
      },
      "writtenOn": "2020-02-11T09:49:02Z",
      "side": 1,
      "message": "https://bugs.chromium.org/p/pdfium/issues/detail?id\u003d1482",
      "parentUuid": "6328628b_233549c4",
      "revId": "7c1a3b257a19818d38c3f195bee3d6faf01e2b8c",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "02856859_08fc063c",
        "filename": "fpdfsdk/cpdfsdk_formfillenvironment.cpp",
        "patchSetId": 16
      },
      "lineNbr": 719,
      "author": {
        "id": 5045
      },
      "writtenOn": "2020-02-05T08:36:31Z",
      "side": 1,
      "message": "CPDFPageFromFPDFPage() can handle a nullptr argument, so the code as written can be combined into:\n\nCPDF_Page* cpdf_page \u003d CPDFPageFromFPDFPage(FPDFPageFromIPDFPage(...));",
      "revId": "7c1a3b257a19818d38c3f195bee3d6faf01e2b8c",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "6b9d43e9_7c6e1bb1",
        "filename": "fpdfsdk/cpdfsdk_formfillenvironment.cpp",
        "patchSetId": 16
      },
      "lineNbr": 719,
      "author": {
        "id": 7688
      },
      "writtenOn": "2020-02-05T13:37:54Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "02856859_08fc063c",
      "revId": "7c1a3b257a19818d38c3f195bee3d6faf01e2b8c",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "5c7e96d4_37cccc44",
        "filename": "fpdfsdk/fpdf_formfill.cpp",
        "patchSetId": 16
      },
      "lineNbr": 288,
      "author": {
        "id": 5045
      },
      "writtenOn": "2020-02-05T08:36:31Z",
      "side": 1,
      "message": "What if |version| is set to -1?",
      "range": {
        "startLine": 288,
        "startChar": 29,
        "endLine": 288,
        "endChar": 36
      },
      "revId": "7c1a3b257a19818d38c3f195bee3d6faf01e2b8c",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e16e215f_2f8b78e1",
        "filename": "fpdfsdk/fpdf_formfill.cpp",
        "patchSetId": 16
      },
      "lineNbr": 288,
      "author": {
        "id": 7688
      },
      "writtenOn": "2020-02-05T13:37:54Z",
      "side": 1,
      "message": "Added a check for version \u003c 1",
      "parentUuid": "5c7e96d4_37cccc44",
      "range": {
        "startLine": 288,
        "startChar": 29,
        "endLine": 288,
        "endChar": 36
      },
      "revId": "7c1a3b257a19818d38c3f195bee3d6faf01e2b8c",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "4d141660_4d5f0987",
        "filename": "fpdfsdk/fpdf_formfill.cpp",
        "patchSetId": 16
      },
      "lineNbr": 298,
      "author": {
        "id": 5045
      },
      "writtenOn": "2020-02-05T08:36:31Z",
      "side": 1,
      "message": "Now that the version requirement check above has been loosened, the rest of FPDFDOC_InitFormFillEnvironment() needs to carefully make sure it is accessing fields with the right version. Here, |xfa_disabled| should only be accessed if |version| is 2.",
      "revId": "7c1a3b257a19818d38c3f195bee3d6faf01e2b8c",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4ded57e5_80f2269a",
        "filename": "fpdfsdk/fpdf_formfill.cpp",
        "patchSetId": 16
      },
      "lineNbr": 298,
      "author": {
        "id": 7688
      },
      "writtenOn": "2020-02-05T13:37:54Z",
      "side": 1,
      "message": "Added a check here for version \u003d\u003d 2",
      "parentUuid": "4d141660_4d5f0987",
      "revId": "7c1a3b257a19818d38c3f195bee3d6faf01e2b8c",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "40794107_f2768db6",
        "filename": "public/fpdf_formfill.h",
        "patchSetId": 16
      },
      "lineNbr": 377,
      "author": {
        "id": 5045
      },
      "writtenOn": "2020-02-05T08:36:31Z",
      "side": 1,
      "message": "This needs to be updated, given the changes in fpdf_formfill.cpp.",
      "revId": "7c1a3b257a19818d38c3f195bee3d6faf01e2b8c",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f1ad2a68_012a2f68",
        "filename": "public/fpdf_formfill.h",
        "patchSetId": 16
      },
      "lineNbr": 377,
      "author": {
        "id": 7688
      },
      "writtenOn": "2020-02-05T13:37:54Z",
      "side": 1,
      "message": "Added a comment mentioning that Version 2 has additional experimental interfaces",
      "parentUuid": "40794107_f2768db6",
      "revId": "7c1a3b257a19818d38c3f195bee3d6faf01e2b8c",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "01570466_607209f6",
        "filename": "public/fpdf_formfill.h",
        "patchSetId": 16
      },
      "lineNbr": 377,
      "author": {
        "id": 5045
      },
      "writtenOn": "2020-02-06T00:38:58Z",
      "side": 1,
      "message": "Before this CL, the version check was rather strict. With this CL, it actually opens up all 4 combinations between the pdfium_enable_xfa GN build flag and the version field here. So we should try to better explain what all the possible combinations mean.",
      "parentUuid": "f1ad2a68_012a2f68",
      "revId": "7c1a3b257a19818d38c3f195bee3d6faf01e2b8c",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b0c7d0ec_6ba720c6",
        "filename": "public/fpdf_formfill.h",
        "patchSetId": 16
      },
      "lineNbr": 377,
      "author": {
        "id": 7688
      },
      "writtenOn": "2020-02-06T11:13:57Z",
      "side": 1,
      "message": "I have updated the comment to be more descriptive.\nThere are still 3 combinations right? version 1 or 2 without XFA and version 2 with XFA.",
      "parentUuid": "01570466_607209f6",
      "revId": "7c1a3b257a19818d38c3f195bee3d6faf01e2b8c",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "b11680cb_f215a41a",
        "filename": "public/fpdf_formfill.h",
        "patchSetId": 16
      },
      "lineNbr": 377,
      "author": {
        "id": 5045
      },
      "writtenOn": "2020-02-11T07:41:15Z",
      "side": 1,
      "message": "Looking at patch set 20, the documentation says 3 combinations, but the code in FPDFDOC_InitFormFillEnvironment() seems to accept all 4 combinations. i.e. When XFA is enabled, FPDFDOC_InitFormFillEnvironment() seems to accept version 1 and version 2. Did I read that correctly?\n\nWith regards to what to accept. I\u0027m ok 3 combinations, as long as FPDFDOC_InitFormFillEnvironment() matches the documentation.",
      "parentUuid": "b0c7d0ec_6ba720c6",
      "revId": "7c1a3b257a19818d38c3f195bee3d6faf01e2b8c",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3cc8af19_48b4df0e",
        "filename": "public/fpdf_formfill.h",
        "patchSetId": 16
      },
      "lineNbr": 377,
      "author": {
        "id": 7688
      },
      "writtenOn": "2020-02-11T09:49:02Z",
      "side": 1,
      "message": "I have updated FPDFDOC_InitFormFillEnvironment to return nullptr if XFA is enabled and version is not 2.",
      "parentUuid": "b11680cb_f215a41a",
      "revId": "7c1a3b257a19818d38c3f195bee3d6faf01e2b8c",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "38f19339_c02e7913",
        "filename": "public/fpdf_formfill.h",
        "patchSetId": 16
      },
      "lineNbr": 1077,
      "author": {
        "id": 5045
      },
      "writtenOn": "2020-02-05T08:36:31Z",
      "side": 1,
      "message": "Would it be better do write \"Ignored if |version| \u003c 2.\" here, like in other version 2 function pointers above? It is what the code in cpdfsdk_formfillenvironment.cpp actually does.",
      "range": {
        "startLine": 1077,
        "startChar": 9,
        "endLine": 1077,
        "endChar": 10
      },
      "revId": "7c1a3b257a19818d38c3f195bee3d6faf01e2b8c",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "960b698e_9a2bd9d3",
        "filename": "public/fpdf_formfill.h",
        "patchSetId": 16
      },
      "lineNbr": 1077,
      "author": {
        "id": 7688
      },
      "writtenOn": "2020-02-05T13:37:54Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "38f19339_c02e7913",
      "range": {
        "startLine": 1077,
        "startChar": 9,
        "endLine": 1077,
        "endChar": 10
      },
      "revId": "7c1a3b257a19818d38c3f195bee3d6faf01e2b8c",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "51c593d2_c67a5bed",
        "filename": "public/fpdf_formfill.h",
        "patchSetId": 16
      },
      "lineNbr": 1083,
      "author": {
        "id": 5045
      },
      "writtenOn": "2020-02-05T08:45:43Z",
      "side": 1,
      "message": "What exactly does \"the PDF page\" refer to?",
      "revId": "7c1a3b257a19818d38c3f195bee3d6faf01e2b8c",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "10e6231d_e2cc1779",
        "filename": "public/fpdf_formfill.h",
        "patchSetId": 16
      },
      "lineNbr": 1083,
      "author": {
        "id": 7688
      },
      "writtenOn": "2020-02-05T13:37:54Z",
      "side": 1,
      "message": "Updated the comment for more clarity. PDF is not needed.",
      "parentUuid": "51c593d2_c67a5bed",
      "revId": "7c1a3b257a19818d38c3f195bee3d6faf01e2b8c",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "02a1f786_0d854e20",
        "filename": "public/fpdf_formfill.h",
        "patchSetId": 16
      },
      "lineNbr": 1083,
      "author": {
        "id": 5045
      },
      "writtenOn": "2020-02-06T00:38:58Z",
      "side": 1,
      "message": "To clarify my question, the ambiguity here is not whether |page_index| is 0-based or not. Let\u0027s say we have a 3 page document, I imagine the potential |page_index| values are 0, 1, and 2. When would PDFium run the callback with a value of 0, vs 2?",
      "parentUuid": "10e6231d_e2cc1779",
      "revId": "7c1a3b257a19818d38c3f195bee3d6faf01e2b8c",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "4bdac0bf_11bb2e25",
        "filename": "public/fpdf_formfill.h",
        "patchSetId": 16
      },
      "lineNbr": 1083,
      "author": {
        "id": 7688
      },
      "writtenOn": "2020-02-06T11:13:57Z",
      "side": 1,
      "message": "The page index is of the page on which the annotation is present. I see the vagueness of the comment. I have updated the comment to mention the page index is of the page which contains the focused annotation.\nLet me know if you still think something more should be added for clarity.",
      "parentUuid": "02a1f786_0d854e20",
      "revId": "7c1a3b257a19818d38c3f195bee3d6faf01e2b8c",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7db1926d_14f662d7",
        "filename": "testing/embedder_test.h",
        "patchSetId": 16
      },
      "lineNbr": 292,
      "author": {
        "id": 5045
      },
      "writtenOn": "2020-02-05T08:36:31Z",
      "side": 1,
      "message": "Please add \"Trampoline\" to the function name, like the ones above. For consistency and to make searching for this function by name easier.",
      "range": {
        "startLine": 292,
        "startChar": 14,
        "endLine": 292,
        "endChar": 27
      },
      "revId": "7c1a3b257a19818d38c3f195bee3d6faf01e2b8c",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "00c374b8_4fb23828",
        "filename": "testing/embedder_test.h",
        "patchSetId": 16
      },
      "lineNbr": 292,
      "author": {
        "id": 7688
      },
      "writtenOn": "2020-02-05T13:37:54Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "7db1926d_14f662d7",
      "range": {
        "startLine": 292,
        "startChar": 14,
        "endLine": 292,
        "endChar": 27
      },
      "revId": "7c1a3b257a19818d38c3f195bee3d6faf01e2b8c",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": false
    }
  ]
}
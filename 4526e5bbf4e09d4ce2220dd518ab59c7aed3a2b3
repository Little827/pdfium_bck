{
  "comments": [
    {
      "key": {
        "uuid": "809da330_ac416686",
        "filename": "core/fxge/cfx_fontmapper.cpp",
        "patchSetId": 24
      },
      "lineNbr": 262,
      "author": {
        "id": 7613
      },
      "writtenOn": "2020-03-03T00:56:00Z",
      "side": 1,
      "message": "This function matches uppercase Unicode characters (code points); I\u0027m wondering:\n\n1. If the types even makes sense, since we\u0027re using a ByteString here. (8-bit code units, with PDF names encoded in UTF-8)\n2. If this is too broad. Do we really want to support non-ASCII uppercase letters here?\n\nI think it would make sense to just limit this to \u0027A\u0027-\u0027Z\u0027; I don\u0027t know if we have a handy function for this. (We don\u0027t want this matching to be locale-sensitive, either.)",
      "range": {
        "startLine": 262,
        "startChar": 9,
        "endLine": 262,
        "endChar": 23
      },
      "revId": "4526e5bbf4e09d4ce2220dd518ab59c7aed3a2b3",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2fc59d6e_df84d2cf",
        "filename": "core/fxge/cfx_fontmapper.cpp",
        "patchSetId": 24
      },
      "lineNbr": 262,
      "author": {
        "id": 5045
      },
      "writtenOn": "2020-03-03T01:02:55Z",
      "side": 1,
      "message": "There actually isn\u0027t a common ASCII \"isupper\" function in fxcrt at the moment. Given how many patch sets we\u0027ve gone through, I want to just land this and follow up on consolidating various \"A-Z\" checks after.",
      "parentUuid": "809da330_ac416686",
      "range": {
        "startLine": 262,
        "startChar": 9,
        "endLine": 262,
        "endChar": 23
      },
      "revId": "4526e5bbf4e09d4ce2220dd518ab59c7aed3a2b3",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "409cd477_7c3a62b8",
        "filename": "core/fxge/cfx_fontmapper.cpp",
        "patchSetId": 24
      },
      "lineNbr": 262,
      "author": {
        "id": 7613
      },
      "writtenOn": "2020-03-03T01:14:35Z",
      "side": 1,
      "message": "Tackling this separately SGTM.",
      "parentUuid": "2fc59d6e_df84d2cf",
      "range": {
        "startLine": 262,
        "startChar": 9,
        "endLine": 262,
        "endChar": 23
      },
      "revId": "4526e5bbf4e09d4ce2220dd518ab59c7aed3a2b3",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "242fc1ba_715eac22",
        "filename": "core/fxge/cfx_fontmapper.cpp",
        "patchSetId": 24
      },
      "lineNbr": 262,
      "author": {
        "id": 5045
      },
      "writtenOn": "2020-03-03T01:15:44Z",
      "side": 1,
      "message": "https://pdfium-review.googlesource.com/c/pdfium/+/28530 removed FXSYS_isASCIIupper() and FXSYS_isASCIIupper(), because the only caller to those passed in a wchar_t. We can bring those back if we find a sufficient number of potential callers.",
      "parentUuid": "2fc59d6e_df84d2cf",
      "range": {
        "startLine": 262,
        "startChar": 9,
        "endLine": 262,
        "endChar": 23
      },
      "revId": "4526e5bbf4e09d4ce2220dd518ab59c7aed3a2b3",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "7bbadeb2_def3ba1f",
        "filename": "core/fxge/cfx_fontmapper.cpp",
        "patchSetId": 24
      },
      "lineNbr": 262,
      "author": {
        "id": 7613
      },
      "writtenOn": "2020-03-03T01:25:16Z",
      "side": 1,
      "message": "Interesting history! It looks like that CL also changed some of the calls to use tolower()/toupper() from ctype.h; these functions are locale-sensitive, which might be surprising in some cases.",
      "parentUuid": "242fc1ba_715eac22",
      "range": {
        "startLine": 262,
        "startChar": 9,
        "endLine": 262,
        "endChar": 23
      },
      "revId": "4526e5bbf4e09d4ce2220dd518ab59c7aed3a2b3",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a53d65c2_e5cebad0",
        "filename": "core/fxge/cfx_fontmapper.cpp",
        "patchSetId": 24
      },
      "lineNbr": 262,
      "author": {
        "id": 7620
      },
      "writtenOn": "2020-03-03T16:16:11Z",
      "side": 1,
      "message": "Since we only need a function like FXSYS_isASCIIupper() right now, and FXSYS_ToUpperASCII() currently exists in the code base, I guess we don\u0027t need to also add back FXSYS_isASCIIlower() or FXSYS_ToLowerASCII() at the moment.",
      "parentUuid": "7bbadeb2_def3ba1f",
      "range": {
        "startLine": 262,
        "startChar": 9,
        "endLine": 262,
        "endChar": 23
      },
      "revId": "4526e5bbf4e09d4ce2220dd518ab59c7aed3a2b3",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "68a59089_978f2f43",
        "filename": "core/fxge/cfx_fontmapper.cpp",
        "patchSetId": 24
      },
      "lineNbr": 272,
      "author": {
        "id": 7613
      },
      "writtenOn": "2020-03-03T00:56:00Z",
      "side": 1,
      "message": "Optional: ByteString::First() creates a (small) copy, which could be avoided here by using a span/ByteStringView. I don\u0027t know if we care enough to fix it, though; I imagine this operation will be pretty rare.",
      "range": {
        "startLine": 272,
        "startChar": 29,
        "endLine": 272,
        "endChar": 34
      },
      "revId": "4526e5bbf4e09d4ce2220dd518ab59c7aed3a2b3",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5ac1d547_c900b4cb",
        "filename": "core/fxge/cfx_fontmapper.cpp",
        "patchSetId": 24
      },
      "lineNbr": 272,
      "author": {
        "id": 5045
      },
      "writtenOn": "2020-03-03T01:02:55Z",
      "side": 1,
      "message": "Right now, the alternative is to create a ByteStringView for |subst_name| and then create a second ByteStringView with its First() call. It\u0027s not obvious whether that\u0027s better or worth than just copying 6 bytes. I don\u0027t think the effort to investigate that is worth it.",
      "parentUuid": "68a59089_978f2f43",
      "range": {
        "startLine": 272,
        "startChar": 29,
        "endLine": 272,
        "endChar": 34
      },
      "revId": "4526e5bbf4e09d4ce2220dd518ab59c7aed3a2b3",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "ad8f0a8c_e57e2797",
        "filename": "core/fxge/cfx_fontmapper.cpp",
        "patchSetId": 24
      },
      "lineNbr": 272,
      "author": {
        "id": 7613
      },
      "writtenOn": "2020-03-03T01:14:35Z",
      "side": 1,
      "message": "I agree that there\u0027s not a strong performance reason here to use a ByteStringView; I think a more persuasive reason would be to get into the habit of writing non-mutating string handling in terms of string views.\n\nAs an aside, I think ByteString doesn\u0027t have a small string optimization (SSO), so it\u0027ll always allocate from the heap. By contrast, a compiler is likely to optimize ByteStringViews to registers, so creating multiple ByteStringViews may well be measurably faster (although the absolute numbers will be tiny). I wouldn\u0027t sweat it in this case, though.",
      "parentUuid": "5ac1d547_c900b4cb",
      "range": {
        "startLine": 272,
        "startChar": 29,
        "endLine": 272,
        "endChar": 34
      },
      "revId": "4526e5bbf4e09d4ce2220dd518ab59c7aed3a2b3",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": false
    }
  ]
}
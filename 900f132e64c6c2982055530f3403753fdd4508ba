{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "1208ea9d_5267390d",
        "filename": "fpdfsdk/fpdf_edit_embeddertest.cpp",
        "patchSetId": 16
      },
      "lineNbr": 4193,
      "author": {
        "id": 5045
      },
      "writtenOn": "2022-04-27T21:50:06Z",
      "side": 1,
      "message": "This needs to be resize() instead. Calling reserve() changes the vector capacity, but not its size. Then operator[] below is technically undefined behavior.\n\n```\n$ cat foo.cc \n#include \u003cvector\u003e\n\nint main() {\n  std::vector\u003cint\u003e vec;\n  vec.reserve(10);\n  vec[8] \u003d 5;\n  return 0;\n}\n```\n\n```\n$ g++ -Wall -D_GLIBCXX_DEBUG foo.cc \u0026\u0026 ./a.out\n/usr/include/c++/11/debug/vector:438:\nIn function:\n    std::__debug::vector\u003c_Tp, _Allocator\u003e::reference \n    std::__debug::vector\u003c_Tp, \n    _Allocator\u003e::operator[](std::__debug::vector\u003c_Tp, \n    _Allocator\u003e::size_type) [with _Tp \u003d int; _Allocator \u003d \n    std::allocator\u003cint\u003e; std::__debug::vector\u003c_Tp, _Allocator\u003e::reference \u003d \n    int\u0026; std::__debug::vector\u003c_Tp, _Allocator\u003e::size_type \u003d long unsigned \n    int]\n\nError: attempt to subscript container with out-of-bounds index 8, but \ncontainer only holds 0 elements.\n```",
      "range": {
        "startLine": 4193,
        "startChar": 22,
        "endLine": 4193,
        "endChar": 29
      },
      "revId": "900f132e64c6c2982055530f3403753fdd4508ba",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a787bf03_acc627ce",
        "filename": "fpdfsdk/fpdf_edit_embeddertest.cpp",
        "patchSetId": 16
      },
      "lineNbr": 4193,
      "author": {
        "id": 8711
      },
      "writtenOn": "2022-04-29T16:30:02Z",
      "side": 1,
      "message": "This was a really good catch. The test seemed to pass because it was comparing an empty `expected_hashes` vector to an empty `orig_hashes` vector. I fixed the test and added checks to ensure `expected_hashes` and `orig_hashes` are populated correctly.",
      "parentUuid": "1208ea9d_5267390d",
      "range": {
        "startLine": 4193,
        "startChar": 22,
        "endLine": 4193,
        "endChar": 29
      },
      "revId": "900f132e64c6c2982055530f3403753fdd4508ba",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "79577217_ddfa36e3",
        "filename": "public/fpdf_edit.h",
        "patchSetId": 16
      },
      "lineNbr": 132,
      "author": {
        "id": 8751
      },
      "writtenOn": "2022-04-23T17:55:47Z",
      "side": 1,
      "message": "What\u0027s the problem with supporting page duplication?",
      "revId": "900f132e64c6c2982055530f3403753fdd4508ba",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "55ca74e6_95d24065",
        "filename": "public/fpdf_edit.h",
        "patchSetId": 16
      },
      "lineNbr": 132,
      "author": {
        "id": 8711
      },
      "writtenOn": "2022-04-29T16:30:02Z",
      "side": 1,
      "message": "thestig@ can confirm, but duplicating a page just in the existing page list structure results is a shallow copy. If the new order of pages is [0 1 0], if the first page gets modified, that modification will show up on page 2 as well.\n\nIn designing this API, we believe it should be simple and not too powerful in its capabilities. A separate duplication API should handle that behavior.",
      "parentUuid": "79577217_ddfa36e3",
      "revId": "900f132e64c6c2982055530f3403753fdd4508ba",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "cdd4e478_3a3c3cf1",
        "filename": "public/fpdf_edit.h",
        "patchSetId": 16
      },
      "lineNbr": 132,
      "author": {
        "id": 5045
      },
      "writtenOn": "2022-04-29T19:22:05Z",
      "side": 1,
      "message": "Yes, a shallow copy can be surprising, so we decided to make the API simpler and avoid this feature.",
      "parentUuid": "55ca74e6_95d24065",
      "revId": "900f132e64c6c2982055530f3403753fdd4508ba",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "697b4ed5_cb40fafe",
        "filename": "public/fpdf_edit.h",
        "patchSetId": 16
      },
      "lineNbr": 132,
      "author": {
        "id": 8751
      },
      "writtenOn": "2022-04-30T11:17:12Z",
      "side": 1,
      "message": "Ok, that makes sense.",
      "parentUuid": "cdd4e478_3a3c3cf1",
      "revId": "900f132e64c6c2982055530f3403753fdd4508ba",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    }
  ]
}
{
  "comments": [
    {
      "key": {
        "uuid": "5920b3e3_399d7db2",
        "filename": "core/fpdfapi/page/cpdf_contentparser.cpp",
        "patchSetId": 1
      },
      "lineNbr": 119,
      "author": {
        "id": 7035
      },
      "writtenOn": "2018-05-16T15:31:06Z",
      "side": 1,
      "message": "I find this harder to understand unrolled like this than with a while/switch structure. Specifically, it\u0027s weird that:\n- Some stages cannot repeat themselves because they are inside an if, not a while. If the stage method returns itself, we\u0027ll hit an assert that doesn\u0027t make it clear that it was forbidden.\n- There is no pause after these stages.",
      "revId": "9f6e50366b3ce50df8739643659dbaa14ec5f37c",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "a91bc08b_df0a1075",
        "filename": "core/fpdfapi/page/cpdf_contentparser.cpp",
        "patchSetId": 1
      },
      "lineNbr": 119,
      "author": {
        "id": 7035
      },
      "writtenOn": "2018-05-16T15:32:53Z",
      "side": 1,
      "message": "If you want to make sure we don\u0027t go back to a previous stage, you could add an assert that new_stage \u003e\u003d old_stage at the end of the while block.",
      "parentUuid": "5920b3e3_399d7db2",
      "revId": "9f6e50366b3ce50df8739643659dbaa14ec5f37c",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "aca7c3df_11134272",
        "filename": "core/fpdfapi/page/cpdf_contentparser.cpp",
        "patchSetId": 1
      },
      "lineNbr": 119,
      "author": {
        "id": 5965
      },
      "writtenOn": "2018-05-16T15:36:31Z",
      "side": 1,
      "message": "Some stages don\u0027t repeat because they don\u0027t need too. The ones that repeat need to repeat. We don\u0027t pause after the non-repeating ones as I don\u0027t think it matters that much. I\u0027m more worried about getting into a long loop that doing something fairly quick. So, I pause after the things that can take a long time.",
      "parentUuid": "a91bc08b_df0a1075",
      "revId": "9f6e50366b3ce50df8739643659dbaa14ec5f37c",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "f36a6485_432c57c0",
        "filename": "core/fpdfapi/page/cpdf_contentparser.cpp",
        "patchSetId": 1
      },
      "lineNbr": 119,
      "author": {
        "id": 7035
      },
      "writtenOn": "2018-05-16T15:49:12Z",
      "side": 1,
      "message": "It\u0027s weird that the logic of whether they repeat or not is present both here in ::Continue and inside the stage method. It\u0027s duplicated logic.",
      "parentUuid": "aca7c3df_11134272",
      "revId": "9f6e50366b3ce50df8739643659dbaa14ec5f37c",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "3685d197_776ef853",
        "filename": "core/fpdfapi/page/cpdf_contentparser.cpp",
        "patchSetId": 1
      },
      "lineNbr": 119,
      "author": {
        "id": 5965
      },
      "writtenOn": "2018-05-16T15:52:37Z",
      "side": 1,
      "message": "Not sure what the duplicated logic is? Continue decides what to do given the current stage, each stage tells which stage to go to next.",
      "parentUuid": "f36a6485_432c57c0",
      "revId": "9f6e50366b3ce50df8739643659dbaa14ec5f37c",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e3cc7b8e_38293a8c",
        "filename": "core/fpdfapi/page/cpdf_contentparser.cpp",
        "patchSetId": 1
      },
      "lineNbr": 119,
      "author": {
        "id": 7035
      },
      "writtenOn": "2018-05-16T16:14:11Z",
      "side": 1,
      "message": "What I don\u0027t like about it is how each method can return some states as \"next\" and not others, and the contract for that is embedded in the order they are called here and whether they are wrapped in a loop or not...\n\nI wish we could use coroutines here.\n\nBut fine, I think having the explicit order of the stage here is a positive trade-off.",
      "parentUuid": "3685d197_776ef853",
      "revId": "9f6e50366b3ce50df8739643659dbaa14ec5f37c",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "18cab3cb_4c34d249",
        "filename": "core/fpdfapi/page/cpdf_contentparser.cpp",
        "patchSetId": 1
      },
      "lineNbr": 121,
      "author": {
        "id": 7035
      },
      "writtenOn": "2018-05-16T16:14:11Z",
      "side": 1,
      "message": "You can remove this.",
      "range": {
        "startLine": 120,
        "startChar": 0,
        "endLine": 121,
        "endChar": 17
      },
      "revId": "9f6e50366b3ce50df8739643659dbaa14ec5f37c",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "0b3c6f83_ef5279a2",
        "filename": "core/fpdfapi/page/cpdf_contentparser.cpp",
        "patchSetId": 1
      },
      "lineNbr": 174,
      "author": {
        "id": 7035
      },
      "writtenOn": "2018-05-16T16:14:11Z",
      "side": 1,
      "message": "For a follow-up. We should probably store somewhere that an error happened. How do we know that, currently?",
      "revId": "9f6e50366b3ce50df8739643659dbaa14ec5f37c",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b",
      "unresolved": true
    }
  ]
}
{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "d17149ad_9204aaef",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 7620
      },
      "writtenOn": "2021-11-08T20:14:22Z",
      "side": 1,
      "message": "This second CL in the chain should address the rest of failed pixel tests due to slight text rendering discrepancies caused by Skia/SkiaPaths.",
      "revId": "dd8f3000910fcae2d9b5b2ca45783dc5341f6a42",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "bf9e47a9_1e74ef43",
        "filename": "testing/resources/pixel/bug_665467_expected_skia.pdf.0.png",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 5045
      },
      "writtenOn": "2021-11-09T01:04:45Z",
      "side": 1,
      "message": "The rendered character in Skia is much narrower than in AGG. Do we know why?",
      "revId": "dd8f3000910fcae2d9b5b2ca45783dc5341f6a42",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b6ef7654_87a13c14",
        "filename": "testing/resources/pixel/bug_665467_expected_skia.pdf.0.png",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 7620
      },
      "writtenOn": "2021-11-11T16:48:58Z",
      "side": 1,
      "message": "This is because Skia/SkiaPaths scales the glyph down horizontally when the width for that glyph defined in the PDF is smaller than the glyph\u0027s default width defined in the font (See [1]). This was introduced to prevent the case that a series of characters on the same line would overlap if their default glyph widths are too big for the width allocated for them in the PDF file.\n\nIn this particular case, font glyph width is 583, pdf glyph width is 376, glyph bounding box width is 506. Currently Skia scales down the glyph by (pdf glyph width/font glyph width). If we want a tighter fit, we can scale down the glyph by (pdf glyph width / bounding box width).\n\nFir this particular test file, to make the Skia rendering result closer to the original glyph, I think we can skip the scaling down process when there is no more than 1 character.\n\n[1] https://source.chromium.org/chromium/chromium/src/+/main:third_party/pdfium/core/fxge/skia/fx_skia_device.cpp;drc\u003d7f90a811412cc677fa49ee5611747c5f37e0b1fa;l\u003d1026",
      "parentUuid": "bf9e47a9_1e74ef43",
      "revId": "dd8f3000910fcae2d9b5b2ca45783dc5341f6a42",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3e53b500_086cfd52",
        "filename": "testing/resources/pixel/bug_665467_expected_skia.pdf.0.png",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 5045
      },
      "writtenOn": "2021-11-11T20:56:22Z",
      "side": 1,
      "message": "Also wondering if the AGG rendering is more correct, or the Skia rendering. Or are they both acceptable? Some of these cases may be a bit tricky, depending on the font substitution.",
      "parentUuid": "b6ef7654_87a13c14",
      "revId": "dd8f3000910fcae2d9b5b2ca45783dc5341f6a42",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "d9ff8082_1493a8ec",
        "filename": "testing/resources/pixel/bug_845697_expected_skia.pdf.0.png",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 5045
      },
      "writtenOn": "2021-11-09T01:04:45Z",
      "side": 1,
      "message": "The AGG version looks a lot more bold. Is that expected?",
      "revId": "dd8f3000910fcae2d9b5b2ca45783dc5341f6a42",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5a252817_50091e40",
        "filename": "testing/resources/pixel/bug_845697_expected_skia.pdf.0.png",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 7620
      },
      "writtenOn": "2021-11-10T16:25:32Z",
      "side": 1,
      "message": "AGG and Skia both render this test file at weight 400 (this weight is also verified in the substitute font that was used for rendering.)\n\nThe difference is AGG uses pFont-\u003eAdjustMMParams() which uses font weight as a `coords` to modify the font face rec.\n\nHowever, Skia doesn\u0027t incorporate the font weight while using the face rec. Skia directly use the font face rec as it is and consider any weight that\u0027s no more than 400 as \"no need to be embolden\". If the font weight is more than 400, Skia rendering will embolden the fonts (using its own API) without changing font face rec.",
      "parentUuid": "d9ff8082_1493a8ec",
      "revId": "dd8f3000910fcae2d9b5b2ca45783dc5341f6a42",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "437d6cc6_1d318b87",
        "filename": "testing/resources/pixel/bug_845697_expected_skia.pdf.0.png",
        "patchSetId": 2
      },
      "lineNbr": 0,
      "author": {
        "id": 5045
      },
      "writtenOn": "2021-11-11T20:56:22Z",
      "side": 1,
      "message": "Thanks for the detailed explanation, but the original question remains. Should the rendered text be bold or not? If it should be bold, like with the AGG rendering, then it may make more sense to file a bug for that and try to fix it somehow, rather than setting a less-bold expectation.",
      "parentUuid": "5a252817_50091e40",
      "revId": "dd8f3000910fcae2d9b5b2ca45783dc5341f6a42",
      "serverId": "fca2d64a-0420-3532-b200-12848c95a47b"
    }
  ]
}